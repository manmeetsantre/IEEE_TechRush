<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .theme-light {
            background: linear-gradient(135deg, #e3f2fd 0%, #e8eaf6 50%, #f3e5f5 100%);
            color: #1f2937;
        }

        .theme-dark {
            background: linear-gradient(135deg, #1f2937 0%, #1e3a8a 50%, #581c87 100%);
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .header-content {
            flex: 1;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.125rem;
            opacity: 0.8;
        }

        .theme-toggle {
            padding: 0.75rem;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-light .theme-toggle {
            background-color: #e5e7eb;
            color: #374151;
        }

        .theme-light .theme-toggle:hover {
            background-color: #d1d5db;
        }

        .theme-dark .theme-toggle {
            background-color: #374151;
            color: #fbbf24;
        }

        .theme-dark .theme-toggle:hover {
            background-color: #4b5563;
        }

        .card {
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(12px);
            transition: all 0.3s ease;
        }

        .theme-light .card {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid #e5e7eb;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .theme-dark .card {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid #374151;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-2 {
            grid-template-columns: 1fr 1fr;
        }

        @media (max-width: 1024px) {
            .grid-cols-2 {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            letter-spacing: 0.05em;
        }

        .file-upload {
            border: 2px dashed;
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-light .file-upload {
            border-color: #d1d5db;
            background-color: #f9fafb;
        }

        .theme-light .file-upload:hover {
            border-color: #3b82f6;
        }

        .theme-dark .file-upload {
            border-color: #4b5563;
            background-color: rgba(55, 65, 81, 0.3);
        }

        .theme-dark .file-upload:hover {
            border-color: #60a5fa;
        }

        .file-input {
            display: none;
        }

        .input, .select {
            width: 100%;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid;
            font-size: 1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .theme-light .input, .theme-light .select {
            background-color: white;
            border-color: #d1d5db;
            color: #1f2937;
        }

        .theme-light .input:focus, .theme-light .select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .theme-dark .input, .theme-dark .select {
            background-color: #374151;
            border-color: #4b5563;
            color: white;
        }

        .theme-dark .input:focus, .theme-dark .select:focus {
            border-color: #60a5fa;
        }

        .theme-dark .input::placeholder {
            color: #9ca3af;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            transform: scale(1.02);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #3b82f6);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #059669, #2563eb);
            transform: scale(1.05);
        }

        .btn-secondary {
            background-color: #3b82f6;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #2563eb;
        }

        .btn-full {
            width: 100%;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #d1d5db;
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
        }

        .theme-dark .tab {
            color: #9ca3af;
        }

        .theme-dark .tab:hover {
            color: #e5e7eb;
        }

        .theme-dark .tab.active {
            color: #60a5fa;
            border-bottom-color: #60a5fa;
        }

        .mcq-container {
            display: none;
        }

        .mcq-container.active {
            display: block;
        }

        .mcq-card {
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .theme-light .mcq-card {
            background-color: white;
            border-color: #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .theme-dark .mcq-card {
            background-color: rgba(55, 65, 81, 0.5);
            border-color: #4b5563;
        }

        .option {
            width: 100%;
            padding: 0.75rem;
            text-align: left;
            border-radius: 0.5rem;
            border: 1px solid;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .theme-light .option {
            background-color: #f9fafb;
            border-color: #d1d5db;
            color: #374151;
        }

        .theme-light .option:hover {
            background-color: #f3f4f6;
        }

        .theme-dark .option {
            background-color: #4b5563;
            border-color: #6b7280;
            color: #d1d5db;
        }

        .theme-dark .option:hover {
            background-color: #6b7280;
        }

        .option.selected {
            background-color: #dbeafe;
            border-color: #3b82f6;
            color: #1e40af;
        }

        .option.correct {
            background-color: #dcfce7;
            border-color: #16a34a;
            color: #166534;
        }

        .option.incorrect {
            background-color: #fef2f2;
            border-color: #dc2626;
            color: #991b1b;
        }

        .option:disabled {
            cursor: not-allowed;
        }

        .explanation {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border-left: 4px solid #3b82f6;
        }

        .theme-light .explanation {
            background-color: #eff6ff;
            color: #1d4ed8;
        }

        .theme-dark .explanation {
            background-color: rgba(30, 58, 138, 0.3);
            color: #93c5fd;
        }

        .explanation-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }

        .explanation-text {
            font-size: 0.875rem;
        }

        .results-card {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .theme-light .results-card {
            background-color: #f3f4f6;
        }

        .theme-dark .results-card {
            background-color: #374151;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        .text-green {
            color: #16a34a;
        }

        .text-center {
            text-align: center;
        }

        .mt-6 {
            margin-top: 1.5rem;
        }

        .summary-content {
            padding: 1.5rem;
            border-radius: 0.5rem;
        }

        .theme-light .summary-content {
            background-color: #f9fafb;
        }

        .theme-dark .summary-content {
            background-color: rgba(55, 65, 81, 0.5);
        }

        .summary-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .summary-header svg {
            margin-right: 0.75rem;
        }

        .theme-light .summary-header svg {
            color: #3b82f6;
        }

        .theme-dark .summary-header svg {
            color: #60a5fa;
        }

        .summary-text {
            font-size: 0.875rem;
            line-height: 1.6;
            opacity: 0.9;
        }
    </style>
</head>
<body class="theme-dark">
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>MCQ Generator</h1>
                <p>Upload a PDF and generate multiple choice questions automatically</p>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <svg id="theme-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5"></circle>
                    <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"></path>
                </svg>
            </button>
        </div>

        <!-- Upload Section -->
        <div class="card">
            <div class="grid grid-cols-2">
                <!-- File Upload -->
                <div>
                    <label class="label">PDF FILE</label>
                    <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" class="file-input" accept=".pdf" onchange="handleFileUpload(event)">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 0.5rem auto; opacity: 0.6;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7,10 12,15 17,10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        <div id="fileStatus">
                            <p style="font-weight: 500;">Choose File or Drag & Drop</p>
                            <p style="font-size: 0.875rem; opacity: 0.7;">PDF files only</p>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <div class="form-group">
                        <label class="label">NUMBER OF QUESTIONS</label>
                        <input type="number" id="numQuestions" class="input" min="1" max="20" value="5">
                    </div>

                    <div class="form-group">
                        <label class="label">DIFFICULTY LEVEL</label>
                        <select id="difficulty" class="select">
                            <option value="Easy">Easy</option>
                            <option value="Medium" selected>Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="label">CHAPTER(S)</label>
                        <input type="text" id="chapters" class="input" value="All" placeholder="All or specific chapters">
                    </div>
                </div>
            </div>

            <button id="generateBtn" class="btn btn-primary btn-full mt-6" onclick="generateMCQs()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 8V4H8"></path>
                    <path d="m8 4 4 4 6-6 2 2v4"></path>
                    <path d="M2 14h12a2 2 0 1 1 0 4h-2"></path>
                    <path d="m2 14 1.5-1.5c.5-.5 1.2-.5 1.7 0l4.8 4.8a2 2 0 0 0 2.8 0L15 15"></path>
                </svg>
                GENERATE MCQS
            </button>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="card hidden">
            <!-- Tab Navigation -->
            <div class="tabs">
                <div class="tab active" onclick="switchTab('mcqs')">
                    MCQs (<span id="mcqCount">0</span>)
                </div>
                <div class="tab" onclick="switchTab('summary')">Summary</div>
            </div>

            <!-- MCQs Tab -->
            <div id="mcqsTab" class="mcq-container active">
                <div id="resultsCard" class="results-card hidden">
                    <h3 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem;">Quiz Results</h3>
                    <p id="scoreText" style="font-size: 1.125rem; margin-bottom: 0.75rem;"></p>
                    <button class="btn btn-secondary" onclick="resetQuiz()">Retake Quiz</button>
                </div>

                <div id="mcqsList"></div>

                <div id="submitSection" class="text-center mt-6 hidden">
                    <button class="btn btn-success" onclick="submitAnswers()">Submit Answers</button>
                </div>
            </div>

            <!-- Summary Tab -->
            <div id="summaryTab" class="mcq-container">
                <div class="summary-content">
                    <div class="summary-header">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                        </svg>
                        <h3 style="font-size: 1.25rem; font-weight: bold;">Document Summary</h3>
                    </div>
                    <p id="summaryText" class="summary-text"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application state
        let currentFile = null;
        let mcqs = [];
        let selectedAnswers = {};
        let showResults = false;
        let currentTheme = 'dark';

        // Theme toggle
        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.className = `theme-${currentTheme}`;
            
            const icon = document.getElementById('theme-icon');
            if (currentTheme === 'dark') {
                icon.innerHTML = `<circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"></path>`;
            } else {
                icon.innerHTML = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>`;
            }
        }

        // File upload handler
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                currentFile = file;
                document.getElementById('fileStatus').innerHTML = `
                    <p style="font-weight: 500; color: #16a34a;">${file.name}</p>
                    <p style="font-size: 0.875rem; opacity: 0.7;">Click to change file</p>
                `;
            } else {
                alert('Please upload a PDF file');
                event.target.value = '';
            }
        }

        // Generate MCQs
        async function generateMCQs() {
            if (!currentFile) {
                alert('Please upload a PDF file first');
                return;
            }

            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.innerHTML = `
                <div class="loading"></div>
                Generating MCQs...
            `;

            try {
                const formData = new FormData();
                formData.append('pdf_file', currentFile);
                formData.append('question_count', document.getElementById('numQuestions').value);
                formData.append('difficulty', document.getElementById('difficulty').value);
                formData.append('chapter', document.getElementById('chapters').value);

                // Replace with your Flask backend URL
                const response = await fetch('http://localhost:5000/', {
                    method: 'POST',
                    body: formData,
                });

                if (response.ok) {
                    const data = await response.json();
                    mcqs = data.mcqs;
                    const summary = data.summary || '';
		    if (typeof mcqs === "string") {
                      try {
                        mcqs = JSON.parse(mcqs);
                      } catch (e) {
                        mcqContainer.innerHTML = "<p>Error parsing MCQs.</p>";
                        return;
                      }
                    }
                    displayResults(mcqs, summary);
                } else {
                    throw new Error('Failed to generate MCQs');
                }
            } catch (error) {
                console.error('Error generating MCQs:', error);
                // Mock data for demonstration
                mcqs = [
                    {
                        id: 1,
                        question: "What is the primary function of mitochondria in a cell?",
                        options: [
                            "Protein synthesis",
                            "Energy production",
                            "DNA replication",
                            "Waste removal"
                        ],
                        correctAnswer: 1,
                        explanation: "Mitochondria are known as the powerhouses of the cell because they produce ATP through cellular respiration."
                    },
                    {
                        id: 2,
                        question: "Which programming paradigm does Python primarily support?",
                        options: [
                            "Only object-oriented",
                            "Only functional",
                            "Multi-paradigm",
                            "Only procedural"
                        ],
                        correctAnswer: 2,
                        explanation: "Python supports multiple programming paradigms including object-oriented, functional, and procedural programming."
                    },
                    {
                        id: 3,
                        question: "What is the time complexity of binary search?",
                        options: [
                            "O(n)",
                            "O(log n)",
                            "O(nÂ²)",
                            "O(1)"
                        ],
                        correctAnswer: 1,
                        explanation: "Binary search has O(log n) time complexity because it eliminates half of the remaining elements in each step."
                    }
                ];
                
                const summary = "This document covers fundamental concepts in computer science and biology, including cellular biology, programming paradigms, and algorithm analysis. The content provides a comprehensive overview of these topics with practical examples and theoretical foundations.";
                displayResults(mcqs, summary);
            } finally {
                btn.disabled = false;
                btn.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 8V4H8"></path>
                        <path d="m8 4 4 4 6-6 2 2v4"></path>
                        <path d="M2 14h12a2 2 0 1 1 0 4h-2"></path>
                        <path d="m2 14 1.5-1.5c.5-.5 1.2-.5 1.7 0l4.8 4.8a2 2 0 0 0 2.8 0L15 15"></path>
                    </svg>
                    GENERATE MCQS
                `;
            }
        }

        // Display results
        function displayResults(mcqData, summaryData) {
            selectedAnswers = {};
            showResults = false;
            
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('mcqCount').textContent = mcqData.length;
            document.getElementById('summaryText').innerHTML = summaryData;
            
            displayMCQs();
        }

        // Display MCQs
        function displayMCQs() {
            const container = document.getElementById('mcqsList');
            container.innerHTML = '';

            mcqs.forEach((mcq, index) => {
                const mcqCard = document.createElement('div');
                mcqCard.className = 'mcq-card';
                mcqCard.innerHTML = `
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">
                        ${index + 1}. ${mcq.question}
                    </h3>
                    <div class="options">
                        ${mcq.options.map((option, optionIndex) => `
                            <button class="option" onclick="selectAnswer(${mcq.id}, ${optionIndex})" 
                                    id="option-${mcq.id}-${optionIndex}">
                                <span>${String.fromCharCode(65 + optionIndex)}. ${option}</span>
                                <span id="icon-${mcq.id}-${optionIndex}"></span>
                            </button>
                        `).join('')}
                    </div>
                    <div id="explanation-${mcq.id}" class="explanation hidden">
                        <div class="explanation-title">Explanation:</div>
                        <div class="explanation-text">${mcq.explanation}</div>
                    </div>
                `;
                container.appendChild(mcqCard);
            });

            updateSubmitButton();
        }

        // Select answer
        function selectAnswer(questionId, answerIndex) {
            if (showResults) return;

            selectedAnswers[questionId] = answerIndex;
            updateOptionStyles(questionId, answerIndex);
            updateSubmitButton();
        }

        // Update option styles
        function updateOptionStyles(questionId, selectedIndex) {
            const mcq = mcqs.find(m => m.id === questionId);
            if (!mcq) return;

            mcq.options.forEach((_, optionIndex) => {
                const option = document.getElementById(`option-${questionId}-${optionIndex}`);
                const icon = document.getElementById(`icon-${questionId}-${optionIndex}`);
                
                option.classList.remove('selected', 'correct', 'incorrect');
                icon.innerHTML = '';

                if (showResults) {
                    option.disabled = true;
                    
                    if (optionIndex === mcq.correctAnswer) {
                        option.classList.add('correct');
                        icon.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #16a34a;"><path d="M9 12l2 2 4-4"></path><circle cx="12" cy="12" r="9"></circle></svg>`;
                    } else if (optionIndex === selectedIndex && optionIndex !== mcq.correctAnswer) {
                        option.classList.add('incorrect');
                        icon.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #dc2626;"><circle cx="12" cy="12" r="9"></circle><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>`;
                    }
                } else if (optionIndex === selectedIndex) {
                    option.classList.add('selected');
                }
            });
        }

        // Update submit button
        function updateSubmitButton() {
            const submitSection = document.getElementById('submitSection');
            const allAnswered = Object.keys(selectedAnswers).length === mcqs.length;
            
            if (allAnswered && !showResults) {
                submitSection.classList.remove('hidden');
            } else {
                submitSection.classList.add('hidden');
            }
        }

        // Submit answers
        function submitAnswers() {
            showResults = true;
            
            // Update all option styles
            mcqs.forEach(mcq => {
                updateOptionStyles(mcq.id, selectedAnswers[mcq.id]);
                document.getElementById(`explanation-${mcq.id}`).classList.remove('hidden');
            });

            // Show results card
            const score = calculateScore();
            const percentage = Math.round((score / mcqs.length) * 100);
            
            document.getElementById('scoreText').textContent = 
                `You scored ${score} out of ${mcqs.length} (${percentage}%)`;
            document.getElementById('resultsCard').classList.remove('hidden');
            
            updateSubmitButton();
        }

        // Calculate score
        function calculateScore() {
            let correct = 0;
            mcqs.forEach(mcq => {
                if (selectedAnswers[mcq.id] === mcq.correctAnswer) {
                    correct++;
                }
            });
            return correct;
        }

        // Reset quiz
        function resetQuiz() {
            selectedAnswers = {};
            showResults = false;
            
            document.getElementById('resultsCard').classList.add('hidden');
            
            // Reset all options and hide explanations
            mcqs.forEach(mcq => {
                mcq.options.forEach((_, optionIndex) => {
                    const option = document.getElementById(`option-${mcq.id}-${optionIndex}`);
                    const icon = document.getElementById(`icon-${mcq.id}-${optionIndex}`);
                    
                    option.classList.remove('selected', 'correct', 'incorrect');
                    option.disabled = false;
                    icon.innerHTML = '';
                });
                
                document.getElementById(`explanation-${mcq.id}`).classList.add('hidden');
            });
            
            updateSubmitButton();
        }

        // Switch tabs
        function switchTab(tab) {
            // Update tab styles
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab:${tab === 'mcqs' ? 'first' : 'last'}-child`).classList.add('active');
            
            // Show/hide tab content
            document.getElementById('mcqsTab').classList.toggle('active', tab === 'mcqs');
            document.getElementById('summaryTab').classList.toggle('active', tab === 'summary');
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial theme icon
            toggleTheme();
            toggleTheme(); // Call twice to set back to dark mode
        });
    </script>
</body>
</html>
